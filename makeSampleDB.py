import sqlite3
from aux import PlotAllGraphs
import os

# tuplas (Id, Local)
sensors = [
    (1, "LINF"),
    (2, "LABCE"),
    (3, "CASESO"),
]

# tuplas (Valor, Tipo, TimeStamp, Sensor)
data = [
    (10.2, 1, 1700000000, 1),
    (12.7, 1, 1700000100, 1),
    (8.9, 1, 1700000200, 1),
    (14.3, 1, 1764099784, 1),
    (6.5, 1, 1700000400, 1),
    (9.8, 1, 1700000500, 1),
    (11.1, 1, 1700000600, 1),
    (7.4, 1, 1700000700, 1),
    (13.0, 1, 1700000800, 1),

    # --- Type 2 ---
    (5.6, 2, 1700000900, 1),
    (7.2, 2, 1700001000, 1),
    (9.9, 2, 1700001100, 1),
    (4.7, 2, 1700001200, 1),
    (8.3, 2, 1700001300, 1),
    (6.1, 2, 1700001400, 1),
    (10.4, 2, 1700001500, 1),
    (7.9, 2, 1700001600, 1),
    (5.3, 2, 1700001700, 1),

    # --- Type 3 ---
    (15.8, 3, 1700001800, 1),
    (11.5, 3, 1700001900, 1),
    (9.0, 3, 1700002000, 1),
    (13.7, 3, 1700002100, 1),
    (10.1, 3, 1700002200, 1),
    (16.9, 3, 1700002300, 1),
    (8.2, 3, 1700002400, 1),
    (12.4, 3, 1700002500, 1),
    (14.6, 3, 1700002600, 1),

    # dados para sensor 2
    (11.4, 1, 1700002700, 2),
    (9.7, 1, 1700002800, 2),
    (13.2, 1, 1700002900, 2),
    (7.6, 1, 1700003000, 2),
    (10.9, 1, 1700003100, 2),
    (12.1, 1, 1700003200, 2),
    (8.4, 1, 1700003300, 2),
    (14.0, 1, 1700003400, 2),
    (6.8, 1, 1700003500, 2),

    # --- Type 2 ---
    (5.9, 2, 1700003600, 2),
    (8.7, 2, 1700003700, 2),
    (10.2, 2, 1700003800, 2),
    (6.3, 2, 1700003900, 2),
    (7.5, 2, 1700004000, 2),
    (9.1, 2, 1700004100, 2),
    (4.8, 2, 1700004200, 2),
    (11.3, 2, 1700004300, 2),
    (6.6, 2, 1700004400, 2),

    # --- Type 3 ---
    (16.2, 3, 1700004500, 2),
    (12.8, 3, 1700004600, 2),
    (9.4, 3, 1700004700, 2),
    (15.1, 3, 1700004800, 2),
    (11.7, 3, 1700004900, 2),
    (17.3, 3, 1700005000, 2),
    (13.5, 3, 1700005100, 2),
    (10.6, 3, 1700005200, 2),
    (14.9, 3, 1700005300, 2),

    # dados para sensor 3
    (10.7, 1, 1700005400, 3),
    (8.6, 1, 1700005500, 3),
    (12.9, 1, 1700005600, 3),
    (7.3, 1, 1700005700, 3),
    (11.8, 1, 1700005800, 3),
    (9.5, 1, 1700005900, 3),
    (14.2, 1, 1700006000, 3),
    (6.9, 1, 1700006100, 3),
    (13.4, 1, 1700006200, 3),

    # --- Type 2 ---
    (5.4, 2, 1700006300, 3),
    (7.6, 2, 1700006400, 3),
    (9.8, 2, 1700006500, 3),
    (4.9, 2, 1700006600, 3),
    (8.1, 2, 1700006700, 3),
    (6.2, 2, 1700006800, 3),
    (10.5, 2, 1700006900, 3),
    (7.7, 2, 1700007000, 3),
    (5.1, 2, 1700007100, 3),

    # --- Type 3 ---
    (15.4, 3, 1700007200, 3),
    (11.9, 3, 1700007300, 3),
    (9.3, 3, 1700007400, 3),
    (13.6, 3, 1700007500, 3),
    (10.4, 3, 1700007600, 3),
    (16.7, 3, 1700007700, 3),
    (12.2, 3, 1700007800, 3),
    (14.8, 3, 1700007900, 3),
    (9.6, 3, 1764099784, 3),

]

if(os.path.exists("sampleDB.db")):
    os.remove("sampleDB.db")

file = open("sampleDB.db", 'w')
file.close()
    
connection = sqlite3.connect("sampleDB.db")
cursor = connection.cursor()

db_creation_script = open("db_script.txt", 'r')
db_creation_command = db_creation_script.read().split("--")

cursor.execute(db_creation_command[0])
cursor.execute(db_creation_command[1])
cursor.execute(db_creation_command[2])

db_creation_script.close()

for sensor in sensors:
    cursor.execute(f"Insert into Sensores(Id, Local) values ({sensor[0]}, '{sensor[1]}');")

for record in data:
    cursor.execute(f"Insert into Registros(Valor, Tipo, TimeStamp, Sensor) values ({record[0]}, {record[1]}, {record[2]}, {record[3]});")

connection.commit()
connection.close()

PlotAllGraphs()
